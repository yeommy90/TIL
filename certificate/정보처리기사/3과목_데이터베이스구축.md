# 34 자료 구조

## 34.1 자료 구조

+ 인덱스 : 데이터베이스 성능에 많은 영향을 주는 DBMS 의 구성요소, 자료를 빠르게 조회하기 위해 별도로 구성한 순서 데이터

## 34.2 선형 자료 구조

+ 리스트
  - 선형 리스트 : 배열, 추가 삭제가 어려움
  - 연결 리스트 : 노드의 추가 삭제가 용이, 메모리 많이 사용, 데이터-링크 형태
+ 스택
  - LIFO(후입선출), Bottom 과 Top, 스택 가드 (오버플로우 상태로 가정해 프로그램 중단)
  - 응용 분야 : 인터럽트 처리, 수식 계산, 재귀 호출, 0-주소 인스트럭션
  - 오버플로우 : 공간이 가득찼을 때 더 넣으려고 하는 경우
  - 언더플로우 : 데이터가 없을 때 꺼내려는 경우
+ 큐 (Queue)
  - 삽입은 선형의 한쪽 끝에서, 제거는 다른쪽 끝에서 수행, FIFO(선입선출)
  - 응용 분야 : 운영체제의 작업 스케줄링
+ 데크 (Deque)
  - 삽입 삭제가 양쪽 끝에서 이루어짐, 스택+큐, 입력 제한 데크 (Scroll), 출력 제한 데크 (Shelf)

## 34.3 비선형 구조

+ 트리
  - 그래프의 특수한 형태, 노드와 가지
  - 관련 용어 : 근노드 (가장 상위 노드), 레벨 (노드의 층), 조상 노드 (근노드까지의 모든 노드), 차수 (자식 노드의 수), 단말 노드 (가장 마지막 노드)
  - 이진 트리 : 차수가 2 이하인 노드로만 구성, 레벨이 5인 트리의 최대 노드 수는 2^5 - 1 = 31개
  - 이진 트리의 구조 : 정이진 트리 (모두 2개씩), 전이진 트리(한쪽 방향 노드 없음), 사향 이진 트리 (한쪽 방향으로만 기울어진 트리)
  - 이진 트리의 운행법 : 전위 (Root-Left-Right), 중위 (Left-Root-Right), 후위 (Left-Right-Root)
  - 연산자 표기 방식 : (AXB) + (CXD) -> + XABXCD (전위 표기) -> ABXCDX + (후의 표기)
+ 그래프
  - 정점과 간선의 집합, 인접 행렬, n(n-1)/2
  - 신장 트리 (Spanning Tree) : 사이클을 이루지 않도록 정점을 연결한 그래프

## 34.4 정렬

+ 삽입 정렬 : 두 번째 값을 키값으로 지정 후 비교 -> 세번째 값을 키값으로 지정 후 비교 ---
+ 버블 정렬 : 두 개씩 정렬, 1회전 마다 제일 큰 값이 뒤로
+ 선택 정렬 : O(n^2), 시간이 오래 걸림, 1회전 마다 제일 작은 값이 앞으로
+ 병합 정렬 : O(nlog_2n), 두 개의 키를 한 쌍으로
+ 퀵 정렬 : O(nlog_2n), 최악 : O(n^2), 부분 교환 정렬법
+ 힙 정렬 (Heap) : O(nlog_2n), 최악 : O(nlog_2n), 전이진 트리

## 34.5 검색

+ 이분 검색(이진 검색) : 순차 정렬 필수, 효율성 높음 
+ 선형 검색(순차 검색) : 비효율적, (n+1)/2
+ 피보나치 검색, 블록 검색, 이진 트리 검색

## 34.6 해싱

+ 해싱 : 해싱 함수를 이용해 해시 테이블 내의 홈 주소를 계산해 레코드에 접근하는 방식, 직접 접근 파일, 오버플로 위험, 메모리 많이 사용
+ 종류 : 제산 방법, 중간 제곱 방법, 중첩 방법, 기수 변환 방법, 계수 분석 방법
+ 슬롯 : 한 개의 레코드를 저장할 수 있는 공간, n개의 슬롯이 모여 하나의 버킷을 형성
+ 동의어 : 동일한 홈주소로 인해 충돌이 일어난 레코드
+ 충돌 : 2개의 다른 레코드가 같은 버킷으로 해싱, 오버플로우 발생

## 34.7 인덱스

+ 인덱스 구성 방식 : B 트리, B+ 트리 (현재 사용)
+ 파일 편성 방법 : 색인 순차 파일 (ISAM), 동적 인덱스 색인 순차 파일 (VSAM)
+ 색인 순차 파일의 구성 : 기본 구성, 색인 영역 (트랙, 실린더, 마스터 인덱스), 오버플로 영역 (실린더 오버플로, 독립 오버플로)
+ VSAM 은 기본 영역과 오버플로 영역을 구분하지 않음
+ 직접 파일 : 해싱 함수를 계산해 물리적 주소에 직접 접근하는 방식
+ 역 파일 : 특정 파일을 여러 개의 색인으로 만들고 항목별 특성에 맞게 작업하도록 구성한 구조

+ 정적 인덱싱 : ISAM, 구조는 정적으로 변하지 않음
+ 동적 인덱싱 : VSAM

<br>

<br>

<br>

# 39 데이터베이스

## 39.1 자료 처리

+ Data 와 Information
+ 자료 처리 시스템의 종류 : 일괄 처리, 온라인 처리, 분산 처리
+ 데이터베이스의 정의 : 통합, 저장, 운영, 공용
+ 데이터베이스의 특성 : 실시간 접근성, 내용에 의한 참조 (주소나 위치 아님), 동시 공유, 계속적 변화
+ DBMS 의 필수 기능 : 정의, 조작, 제어 (무결성, 권한)
+ 데이터웨어하우스 : OLAP(On-Line Analytical Processing), Roll-up, Drill-down, Dicing, Slicing
+ 용어 : 데이터 마이닝, Hadoop (분산처리를 소규모 컴퓨터 다수로)

## 39.2 데이터베이스의 구성

+ 스키마 : 데이터베이스의 구조 (개체, 속성, 관계) 에 대한 정의
+ 스키마 3계층 : 외부 스키마 (접근 정의), 개념 스키마 (데이터 접근 권한, 무결성 규칙), 내부 스키마 (실제 저장 방법)
+ 데이터베이스 언어 : 정의, 조작, 제어
+ 데이터베이스 사용자 : 관리자 (DBA), 응용 프로그래머, 일반 사용자

## 39.3 데이터베이스 모델

+ 데이터 모델 : 데이터베이스 설계 과정에서 데이터의 구조를 표현하기 위한 도구
+ 구성 요소 : 데이터 구조, 연산, 제약조건
+ 개념적 모델 : E-R 다이어그램 (개체-사각형, 관계-마름모, 속성-타원, 연결-실선)
+ 논리적 모델 : 계층형 (트리구조), 네트워크(망)형 (그래프 구조), 관계형 (table의 집합), 객체지향형

## 39.4 관계형 데이터베이스 모델

+ 모델 구조 : 릴레이션 구조 - 학생 / 속성 - 학번, 이름, 학과, 디그리 (속성의 수) / 튜플 - 레코드, 카디널리티 (튜플의 수) / 도메인 - 하나의 속성이 가질 수 있는 값의 영역
+ 릴레이션의 특징 : 튜플의 유일성, 튜플의 무순서성, 속성의 원자성, 속성의 무순서성
+ Key 의 종류와 무결성
  - 슈퍼키 : 두 개 이상의 속성으로 구성된 키 또는 혼합키 (학번+나이, 주민번호+이름)
  - 후보키 (기본키가 될 수 있는 후보들, 유일성과 최소성 만족), 기본키 (후보키들 중에서 선택), 대체키 (남은 후보키)
  - 외래키 : 다른 테이블의 기본키로 사용되는 속성 (학생 테이블의 학번은 참조키, 수강 테이블의 학번은 외래키)
  - 개체 무결성 : 기본키의 값은 null 이나 중복 값을 가질수 없음
  - 참조 무결성 : 외래키를 변경하려면 참조키도 변경해야함
  - 도메인 무결성 : 릴레이션 중 하나의 속성은 반드시 원자값이어야함

## 39.5 데이터베이스 설계

+ 설계 단계 : 요구조건 분석 - 개념적 설계 - 논리적 설계 (스키마) - 물리적 설계
+ 데이터베이스 정규화 : 구조의 안정화, 중복 최소화, 수정 삭제시 이상 현상 최소화
+ 함수적 종속 : 결정자 (학번), 종속자 (이름), 학번 -> 이름
  - 완전 함수적 종속, 이행 함수적 종속 (x->y, y->z, x->z)

## 39.6 데이터베이스 정규화

+ 1정규형 : 릴레이션의 도메인은 원자값만으로 구성
+ 2정규형 : 부분 함수적 종속 제거, 두 개의 테이블로 분할
+ 3정규형 : 이행적 함수 종속 제거, 두 개의 테이블로 분할
+ BCNF (보이스/코드) 정규형 : 결정자가 후보키가 아닌 함수 종속을 제거
+ 4정규형 : 다치 종속 제거
+ 5정규형 : 후보키를 통하지 않은 조인 종속 제거
+ 도부이결다조!

## 39.7 데이터베이스 반정규화

+ 정규화를 통해 테이블 개수가 증가함에 따라 조회 성능이 떨어질 수 있음 -> 운영의 단순화
+ 기법 : 테이블 반정규화, 컬럼 반정규화, 관계 반정규화
+ 테이블 반정규화 기법
  - 테이블 병합 : 1:1, 1:다, 슈퍼:서브
  - 테이블 분할 : 파티셔닝, 분산기법, 분할키 기준 분할 (범위, 목록, 해시, 합성, 라운드-로빈)
  - 테이블 추가 : 중복 테이블 추가 (원격조인 제거), 집계, 이력, 부분, 진행
+ 컬럼 반정규화 기법 : 중복 컬럼 추가, 파생, 이력 테이블, PK(Primary Key)
+ 관계 반정규화 기법 : 중복 관계 추가
+ 클러스터링 : 두 대 이상의 서버를 하나의 서버처럼 운영 (병렬처리, 고가용성 클러스터링)

<br>

<br>

<br>

# 40 관계 대수와 연산자

## 40.1 관계 대수와 관계 해석

+ 관계 대수 : 절차적 언어, 연산의 집합
+ 순수 관계 연산자
  - Select(합) : 튜플 집합 검색, 수평적 연산
    - 시그마학과='전자과'(학생) : 학생 릴레이션에서 학과가 전자과인 학생의 튜플을 검색
  - Project(파이) : 속성 집합 검색, 수직적 연산
  - Join(리본) : 두 릴레이션의 공통 속성을 연결
  - Division(나누기 기호) : 두 릴레이션에서 특정 속성을 제외한 속성만 검색
+ 집합 연산자 : 합집합, 교집합, 차집합, 교차곱 (Cartesian Product, 속성은 더하고 튜플은 곱하고)

<br>

<br>

<br>

# 41 SQL (Structured Query Language)

## 41.1 SQL

+ 관계형 데이터베이스의 표준 질의어
+ DDL : CREATE (스키마, 도메인, 테이블, 뷰 정의), ALTER (필드 추가, 삭제, 갱신), DROP (Cascade, Restrict)
+ DML : SELECT (DISTINCT 중복 생략), INSERT INTO VALUES, DELETE FROM WHERE, UPDATE SET WHERE
  - having - group by, 구간값 계산 AND
+ DCL : COMMIT, ROLLBACK, GRANT (권한 부여), REVOKE (권한 취소)
+ 뷰 (가상 테이블) 의 정의 변경 시 ALTER 문을 사용할 수 없고 DROP 문을 이용한다.
+ 시스템 카탈로그 : 데이터 사전, 메타 데이터, DBMS 가 스스로 생성하고 유지
+ NoSQL (Not only SQL)
+ in (1, 2, 3) = (1 or 2 or 3)

<br>

<br>

<br>

# 42 트랜젝션, 병행 제어

## 42.1 트랜잭션

+ 정의 : 데이터베이스에서 일어나는 연산의 집합, 작업 단위
+ 특성 : 원자성, 일관성, 격리성, 영속성
+ CRUD Matrix : 데이터베이스 분석 툴
+ 트랜잭션 연산 : COMMIT, ROLLBACK, RECOVERY

## 42.2 병행 제어

+ 동시에 수행되는 트랜젝션들을 일관성 있게 처리하기 위해 제어 (동시 접속)
+ 종류 : 로킹 (LOCKING), 최적 병행 수행, 타임스탬프 (트랜잭션간의 순서), 다중 버전 기법
  - 로킹 : 단계별 로킹, 2단계 로킹 (확장, 축소)

<br>

<br>

<br>

# 43 보안, 분산 데이터베이스

## 43.1 보안

+ 암호화
  - 비밀키(대칭키) : 암호화=복호화
  - 공개키(비대칭키) : 암호화!=복호화
+ 권한 부여 기법 : GRANT (권한 부여) / REVOKE (권한 취소)
+ 트리거 : 자동 처리

## 43.2 분산 데이터베이스

+ 목표 : 위치 투명성, 중복 투명성, 병행 투명성, 장애 투명성
+ 장/단점 : 시간 단축, 공유성 신뢰성 가용성 향상 / 비용 증가, 오류 발생 증가, 통신망 성능에 좌우



















